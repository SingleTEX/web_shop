<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up</title>
    <link rel="stylesheet" href="style/grid.css">
    <link rel="stylesheet" href="style/foothead.css">
    <link rel="stylesheet" href="style/silog.css">
    <link rel="stylesheet" href="style/gradiant-static.css">
</head>

<body>
    <div class="container-grid">
        <div class="container">

            <header>

            </header>
            <main>
                <div class="singlog">
                    <button type="button" class="active" id="loginBtn">Log in</button>
                    <button type="button" class="active" id="signupBtn">Sign in</button>
                </div>
                <div id="signupForm" style=display:none;>
                    <label for="firstname">First Name</label>
                    <input type="text" placeholder="Enter name" name="firstname" required>

                    <label for="lastname">Last Name</label>
                    <input type="text" placeholder="Enter last name" name="lastname" required>

                    <label for="username">Username</label>
                    <input type="text" placeholder="Enter username" name="username" required>

                    <label for="email">Email</label>
                    <input type="email" placeholder="Enter email" name="email" required>

                    <label for="psw">Password</label>
                    <input type="password" placeholder="Enter password" name="psw" required>
                    <!-- send informations to the database -->
                    <button type="submit">Sign up</button>

                    <div class="cnp">
                        <button type="button" class="cancelBtn" onclick="window.location.href='index.html'">Cancel</button>
                    </div>
                </div>

                <div id="loginForm" style="display: block;">
                    <label for="username">Username</label>
                    <input type="text" placeholder="Enter username" name="username" required>

                    <label for="psw">Password</label>
                    <input type="password" placeholder="Enter password" name="psw" required>

                    <div class="cnp">
                        <!-- ask the database for log in info -->
                        <button type="submit" class="logBtn" href="index.html">Log in</button>
                        <span class="psw">Forgot <a href="#">password?</a></span>
                    </div>

                </div>
            </main>

            <div class="bg"></div>

            <footer>

            </footer>



        </div>
    </div>
    <script src="js/script.js"></script>
    <script src="js/singlig.js"></script>
    <script src="database/dbcon.js"></script>
<script>
    const express = require('express');
const sql = require('mssql');
const app = express();
const port = 3000;

// Middleware to parse JSON bodies
app.use(express.json());

// Configuration object for connecting to the database
const config = {
    user: 'YourUsername',
    password: 'YourPassword',
    server: 'localhost\\SQLEXPRESS',
    database: 'oktika',
    options: {
        encrypt: true, // For Azure SQL, you need to enable encryption
        trustServerCertificate: true // For Azure SQL, you need to trust the server certificate
    }
};

// Function to connect to the database
async function connectToDB() {
    try {
        await sql.connect(config);
        console.log('Connected to the database');
    } catch (err) {
        console.error('Error connecting to the database:', err);
    }
}

// Call the connectToDB function to establish the connection
connectToDB();

// Endpoint to handle user registration
app.post('/signup', async (req, res) => {
    try {
        // Extract user data from the request body
        const { firstname, lastname, username, email, password } = req.body;

        // SQL query to insert user data into the database
        const query = `
            INSERT INTO Users (FirstName, LastName, Username, Email, Password)
            VALUES (@FirstName, @LastName, @Username, @Email, @Password)
        `;

        // Execute the query
        await sql.query(query, {
            FirstName: firstname,
            LastName: lastname,
            Username: username,
            Email: email,
            Password: password
        });

        // Send a success response
        res.status(200).send('User registered successfully.');
    } catch (error) {
        // Handle errors
        console.error('Error:', error);
        res.status(500).send('Error registering user.');
    }
});

// Start the server
app.listen(port, () => {
    console.log(`Server listening at http://localhost:${port}`);
});



</script>
</body>

</html>